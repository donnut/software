#!/usr/bin/env python
# -*- mode: python; coding: utf-8 -*-
# Copyright © 1996, 1998, 1999, 2000 Progiciels Bourbeau-Pinard inc.
# François Pinard <pinard@iro.umontreal.ca>, 1996.

"""\
Output an empty version of a PO file (thus getting back the POT file state).
"""

import os, sys

sys.path.insert(0, sys.path[0]+'/../lib')
import po

def _(text):
    return text

if len(sys.argv) == 1:
    entries = po.read('-')
elif len(sys.argv) == 2:
    entries = po.read(sys.argv[1])
else:
    raise _('Usage: %s [PO-FILE]') % sys.argv[0]

for entry in entries:
    if entry.has_key('comment'):
        del entry['comment']
    if entry['msgid']:
        entry['msgstr'] = ''

header = po.header(entries)
for field in header.keys():
    #if field != 'project-id-version':
    if field != 'pot-creation-date':
        del header[field]
po.set_header(entries, header)

po.write('-', entries)
